---
Title: 『オブジェクト設計スタイルガイド』を読んだ感想
Category:
- 技術書
EditURL: https://blog.hatena.ne.jp/kos0514/kos0514.hatenablog.com/atom/entry/6802418398474848853
PreviewURL: https://kos0514.hatenablog.com/draft/entry/MqV0rcO47pPgVgUWj1ookJz-QyA
Draft: true
---

こんにちは、[@kos0514](https://x.com/kos0514_dev)です。

最近、『オブジェクト設計スタイルガイド』を読んだので、その感想をまとめたいと思います。

[https://www.oreilly.co.jp/books/9784814400331/:embed:cite]

# はじめに

この本の印象と、私の状態を記載すると

この本を読んだ率直な感想としては、Effective OOP　のような（これは存在しないですが）、Tips集という印象でした。
本書で登場する言葉を見て、DDDの概念を用いて記載しているようです。

ちなみに、DDDのことは現在勉強中なので、まだまだ分からないことは多いといった状況です。


# 感想

まず、この本を読んで勉強になったことや、知らずに恥ずかしかったことを羅列します。
仕事の中で無意識にやっていたものの、意味を理解せずにやっていた部分があったので、恥ずかしさを感じました。

## 全体的に感じたこと
* イミュータブルにしろ
* コンポジションを使え
* 責務を分離しろ

## 学び
* コンストラクタインジェクション
  * 全体的に、コンストラクタインジェクションで依存関係を注入することについて記載があった
* Arrange-Act-Assert
    * Arrange ─ テスト対象となるオブジェクト（SUT、Subject Under Testとも呼ばれる）を、ある状態にする。
    * Act ─ メソッドを呼び出す。
    * Assert ─ その結果の状態について、何らかのアサーションを行う。
* ２種類のサービスオブジェクト
* コンストラクタの中では、何もしないのがオブジェクトのマナー
* バリューオブジェクト
  * オブジェクトが包んでいるデータは検証済みであると確信できる
  * メソッド追加により、フィールドのデータを利用した、意味のある振る舞いを追加で公開可能
  * フィールドで、姓 + 名　のように一緒に使われる値をまとめることが可能
  * 実装の詳細を隠蔽できる
* モディファイアメソッド
  * なんだっけ
* 継承ではなく、コンポジションで解決しよう
  * クラスは、finalで継承を防御しよう
  * フィールドも、private finalにしよう
* ライトモデルリポジトリ、リードモデルリポジトリ
* 名前付きコンストラクタ（public staticなメソッド）
  * ファクトリメソッドと呼んでいた
  * 呼び方を知らなかっただけ

## 知らずに恥ずかしかったこと
* モックとスタブを理解していなかった
  * スタブは戻り値を設定し
  * モックが、呼び出されたこを検証する
  * フェイク
  * テストのしやすさという観点での、依存観点逆転の原則
* CQS（コマンドクエリ分離）
  * クエリメソッドはモック化すべきではない　呼び出し回数も検証するな　副作用がないことを前提　何度も呼び出し可能
  * コマンドメッソッドは、タスクを実行するために使用される
  * 多くのことをやるな
  * コマンドメソッド内で、クエリメソッドを呼ぶこともあるよ
